## 데이터 모델링의 이해

#### 모델링의 정의
* 모델이란 다양한 현상에 대해 일정한 표기법에 의해 표현해 놓은 모형이다. 현실세계의 추상화된 반영이다.
* 모델링이란 다양한 현상(사람, 사물, 개념 등에 발생되는)을 표기법에 의해 규칙을 가지고 표기하는 것이다.
* 모델링이란 복잡한 현실세계를 일정한 표기법에 의해 표현하는 일!
* 모델링이란 현실세계를 추상화, 단순화, 명확화하기위해 일정한 표기법에 의해 표현하는 기법! 

#### 데이터 모델링의 정의
* 정보시스템을 구축하기 위해, 해당 업무에 어떤 데이터가 존재하는지 또는 업무가 필요로하는 정보는 무엇인지(what)를 분석하는 방법
* 업무에서 필요로하는 데이터를 시스텝 구축 방법론에 의해 분석, 설계하여 정보 시스템을 구축하는 과정.

#### 데이터 모델링의 3단계 과정
* 개념적 데이터 모델링
   * 추상화 수준이 높고 업무 중심적이고 포괄적인 수준의 모델링 진행. 
   * 사용자와 개발자가 데이터 요구사항을 정의하는 것
  
* 논리적 데이터 모델링 :
  * 구체화된 업무중심의 데이터 모델. 시스템으로 구축하고자 하는 업무에 대해 Key, 속성, 관계등을 정확하게 표현
  * 디비 설계 프로세스틔 Input으로 비즈니스 정보의 논리적인 구조와 규칙을 명확하게 표현하는 과정이다. 
  * 물리적인 스키마 설계를 하기 전 단계의 데이터 모델 상태다. 
  * 핵심은 누가, 어떻게 그리고 전산화와는 별개로 비즈니스 데이터에 존재하는 사실들을 인식하여 기록하는 것이다.
  * 정규화가 진행된다. 정규화는 논리 데이터 모델의 이로간성을 확보하고 중복을 제거하여 속성들이 가장 적절한 엔티티에 배치되도록 함으로써 신뢰성있 데이터 구조를만든다.
* 물리적 데이터 모델링 
  * 실제로 디비에 이식할수 있도록 성능, 저장 등물리적인 성격을 고려하여 설계.
  *  논리데이터 모델이 데이터 저장소로서 어떻게 하드웨어에 표현될 것인가를 다룬다. 물리적 스키마라고 한다. 

#### 데이터 독립성의 요소 
* 외부스키마
  * 뷰 단계 여러 개의 사용자 관점으로 구성. 각 사용자가 보는 개인적 db 스키마
* 개념스키마
  * 모든 데이터를 통합한 조직 전체의 eb를 기술한 것으로 db에 저장되는 데이터와 그들 간의 관례를 표현한 스키마
* 내부스키마
  * db가 물리적으로 저장된 형식
  
#### 데이터 모델링의 세가지 요소
* 업무가 관여하는 어떤것 things -> 엔티티 (단수: 인스턴스(instance) 어커런스(occurrence), 복수 : 엔티이)
* 어떤것이 가지는 성격 attributes -> 속성 (단수: 속성값 attirbute value, 복수 : 속성 atrribute)
* 업무가 관여하는 어떤것 간의 관계 relationships -> 관계 (단수: 페어링 pairing, 복수 : 관계 relaationship)

#### erd (entity relationship model) 
1. 엔티티 배치
2. erd 관계 연결 : 고객 - 주문
3. erd 관계명 표시 : 고객 --주문하다/주문받다---- 주문
4. erd 관계 차수(cardinality: 엔티디 내의 인스턴스들이 얼마나 관계에 참여하는지를 나타내는 것)와 선택성 표시 : 고객 -I-주문하다-< 주문

### 엔티티
* 업무에 피룡하고 유용한 정보를 저장하고 관리하기 위한 집합적인 것
* 반드시 해당 업무에서 필요하고 관리하고자하는 정보
* 식별자에 의해 식별가능해야한다
* 영속성으로 존재하는 인스턴스 집합이어야 한다(한개가 아니라 두개이상)
* 엔티티는 업무프로세트에 이용되야
* 반드시 속성이 있어야
* 다른 엔티티와 한 개 이상 관게가 있어야 한다.

#### 엔티티의 분류
* 유무형에 따른 분류
  * 유형 : 물리적인 형태가 있고 안정적이고 지속적으로 활용되는 엔티티 ex) 사원, 물품, 강사...
  * 개념 : 물리적인 형태가 없고 관리해야할 구분이 되는 엔티디로 ex) 조직, 보험상품...
  * 사건 : 업무를 수행함에따라 발생되는 엔티티 ex) 주문, 청구, 미납...
  
* 발생시점에 따른 분류
  * 기본엔티티 : 업무에 존재하는 정보로 다른 엔티티와 관계에 대해 생성되지 않고 독립적으로 생성이 가능하고 자신은 타 엔티티의 부모역할을 하게 된다. ex) 사원, 부서, 고객,상품..
  * 중심엔티티 : 기본엔티티로부터 발생되고 그 업무에 있어 중심역할을 한다. ex) 계약, 청구, 주문, 매출
  * 행위 엔티티 : 두개 이상의 부모엔티티로부터 발생되고 자주 바뀌거나 데이터 양이 증가된다. ex) 주문목록, 사원변경이력..
  * 
  
### 속성
* 업무에서 필요로하는 인스턴스로 관리하고자 하는 의미사 ㅇ 더 이상 분리되지 않는 최소의 데이터 단위
* 해당업무에서 필요하고 관리하고자 하는 정보
* 주식별자에 함수적 종속성을 가져야 한다.
* 하나의 속성에는 한개의 값만 가진다.
* 도메인 : 엔티티 내에 속성에 대한 데이터 타입과 크기 그리고 제약사항을 지정하는 것

### 관계
* 인스턴스 사이의 논리적인 연관성으로 존재 또는 행위로써 서로에게 연관성이 부여된 상태
* 행위에 의한 관계(고객이 주문한다)), 존재에 의한 관계(부서에 사원이 소속된다)가 있다.

#### 관계 체크사항
* 두 개의 엔티티 사이에 관심있는 연관 규칙이 있는가?
* 두 엔티티사이에 정보조합이 발생되는가?
* 관계연결에 대한 규칙이 서술됐는가?
* 관계연결을 가능하게하는 동사가 있는가??

### 식별자 
* 식별자란 엔티티내에서 인스턴스들을 구분할 수 있는 구분자이다. 
* 식별자는 논리 데이터 모델링 단계에서, 키는 물리 데이터 모델링 단계에서 사용한다.
* 주 식별자 : 엔티티내 유일한 값 (최소성, 불변성, 존재성)

#### 주식별자 도출기준
* 해당 업무에서 자주 이용되는 속성
* 명칭 내역 등과 같이 이름으로 기술 되는 것들은 하지 않는다
* 복합으로 주식별자를 구성할 경우 최소한의 속성으로 한다
* 
#### 식별자관계
* 외부식별자는 자기 자신의 엔티티에 필요한 속성이 아니라 다른 엔티티와의 관계를 통해 자식 쪽에 엔티티에 생성되는 속성이다. 
* 이때 외부식별자를 자식엔티티의 주 식별자로 할지, 외부식별자로 할지를 고민해야한다.

###### 외부식별자를 자식엔티티의 주식별자로 할경우 (식별자 관계)
* 외부식별자가 null 값이 오면 안되므로 반드시 부모엔티티가 먼저 생성되고 자식엔티티가 생성되야 한다. 
* 부모엔티티의 속성을 자식엔티티가 모두 가지고 있고, 주식별자도 같다면  부모 : 자식 관계는 1:1 이지만 자식 엔티티에 다른 속성이 추가된다면 이는 1:M 관계다
* 문제점 : 주식별자 속성이 지속적으로 증가할 수 밖에 없는 구조로 개발자 복잡성와 오류 가능성을 유발할수 있다.

###### 외부식별자를 자식엔티티의 주식별자로 하지 않을 경우 (비식별자 관계)
* 부모없는 자식이 생성될 수 있다
* 엔티티별로 데이터 생명주기를 다르게 관리할 경우. 부모가 관계를 가지고 있다가 자식만 두고 사라진 경우. 이에 대한 방안으로 물리 디비 생성시 외래키를 연결하지 않는 임시방법이 있지만 데이터 모델상 관계를 비식별자 관계로 조정하는 것이 좋다.
* 여러 엔티티가 하나의 엔티티로 통합되어 표현되엇는데 각각의 엔티티가 별도의 관계를 가질때
* 자식엔티티에 주식별자로 써도되지만 별도의 주식별자를 생성하는 것이 더 유리하다고 판단될 때
* 문제점 : A (one---- many) B (ont----many) C 관계에서 A에서 C에 있는 데이터를 참고하기위해선 조인을 해서 들어가야 한다. 때문에 불필요한 조인이 다량으로 유발되면서 sql 구문도 길어지고 성능이 저하되는 현상.


#### 식별자관례와 비식별자 관계 모델링
* 식별자 관계와 비식별자 관계를 취사 선택 한다.
* 강한 연결관계에 있다면 식별자 관계, 약한 연결관계에있다면 비식별자 관계. 

