# RxJava 의 기본
[RxJava리액티브 프로그래밍](https://book.naver.com/bookdb/book_detail.nhn?bid=14689555) 책

## RxJava와 리액티브 프로그래밍

- RxJava는 리액티브 프로그래밍을 구현하는 데 사용하는 라이브러리
- 이벤트 처리와 비동기처리에 최적화
- 2.0 부터는 Reative Strems 사양을 구현
    - Reative Strems는 어떤 라이브러리나 프레임워크도 데이터 스트림을 비동기로 처리하는 공통 메커니즘을 인터페이스로 제공

### 리액티프 프로그래밍이란

- 데이터가 통지될때마다 관련 프로그램이 반응(reaction)해 데이터를 처리하는 프로그래밍 방식
- 프로그램이 필요한 데이터를 가져와 처리하느 ㄴ것이 아니라, 보내온 데이터를 받은 시점에 반응해 이를 처리하는 프로그램을 만드는것이 리액티브 프로그래밍

### RxJava의 개요

- 에릭마이어가 개발한 .Net 프래임워크의 실험적인 라이브러리인 Reactive Extention (Rx) 를 2009년 마이크로소프트에서 공개하고, 2013년 넷플릭스가 자바로 이식한것이 Rx자바의 시작
- Reativce Extension 의 다양한 라이브러리 등장 → 구현체가 재각각
- 데이터 스트림을 비동기로 다루는 최소한의 API를 정함  → Rxjava 탄생
- 1.x은 Reative Stream를 지원하지 않음, Reactive Stream를 지원하는 2.0버전은 기본 구조를 유지하면서 내부를 새로 구현해 성능 개선함 (2.0에서 배압 등장)

## RxJava의 특징

- RxJava는 디자인 패턴인 옵저버패턴의 확장
    - 옵저버패턴은 감시 대상 객체의 상태가 변하면 이를 관찰하는 객체제 알려주는 구조
    - 데이터 생성자와 데이터 소비자를 나눌 수 있어 쉽게 데이터 스트림을 처리
- RxJava는 쉬운 비동기 처리
- RxJava는 함수형 프로그래밍의 영향 → 대부분 함수형 인터페이스 인자로 전달받는 메서드를 사용해 처리 구현

## Reative Streams

- Reative Streams란 라이브러리나 프레임워크에 상관없이 데이터 스트림을 비동기로 다룰 수 있는 공통 매커니즘으로 이 매커니즘을 편리하게 사용할 수 있는 인터페이스 제공
- 데이터를 만들어 통지하는 생산자(Publisher)와 데이터를 받아 처리하는 소비자(Subscriber)로 구성
- 데이터의 흐름
    - 생산자는 통지 준비가 끝나면 소비자에게 통지 (onSubScripbe)
    - 통지를 받은 소비자는 받고자하는 데이터 개수를 요청 , 요청하지 않으면 생상자는 통지해야할 데이터 개수 요청을 기다리게 됨으로 통지를 시작하지 않음
    - 생상자는 데이터를 생산해 소비자에게 통지 (onNext)
    - 데이터를 받은 소비자는 받은 데이터를 처리
    - 생상자는 요청받은 만큼 데이터를 통지 후 소비자가 다음 요청이 올때까지 통지 중단
    - 이후 소비자가 처리작업을 완료하면 다음에 받을 데이터 개수를 생산자에게 요청
    - 생산자는 소비자가 모든 데이터를 통지하고 마지막으로 데이터 전송이 완료되면 종료되었다고 통지 (onComplete)
    - 생상자는 처리 도중에 에러가 발생하면 에러 통지 (onError)
- 규칙
    - 구독 시작 통지(onSubscribe)는 해당 구독에서 한 번만 발생
    - 통지는 순차적으로 발생
    - null은 통지 하지 않음
    - 생산자의 처리는 완료 또는 에러를 통지해 종료한다.

### RxJava의  기본 구조

- 생산자와 소비자
    - Reative Streams를 지원하는 Flowable 과 Subscriber
    - Reative Streams를 지원하지 않고 배압기능이 없는 Observable과 Observer
        - 배압기능이 없어 데이터 개수를 요청하지 않음
        - Subscription을 사용하지 않고 Disposiable이라는 구독해지 메서드를 인터페이스로 사용

### 비동기 처리

- RxJava에서는 개발자가 직접 스레드를 관리하지 않게 각 처리 목적에 맞춰 스레드를 관리하는 스케줄러(scheduler)제공
- 스케줄러는 데이터를 생성해 통지하는 부분, 데이터를 받아 처리하는 부분에 지정가능
- 비동기 처리시 스레드 안전하도록 주의

### Cold 생산자, Hot 생산자

- Cold
    - 1개의 소비자와 구독
- Hot
    - N개의 소비자와 구독
- RxJava는 기본 Cold 생산자
- 관련 클래스
    - ConnectableFlowable / ConnectableObservable

## 마블다이어그램

- 리액티브프로그래밍에서 시간 경과에 따라 데이터가 전달되고 변화되는지를 표현
- 주로 Flowable Observable에서 메서드를 호출할때, 시간의 경과에 따라 데이터가 어떻게 변화하는지를 설명